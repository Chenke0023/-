# RSS æ–°é—»è¿‡æ»¤å™¨ - ä½¿ç”¨è¯´æ˜

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å½“å‰çŠ¶æ€
- **Docker æœåŠ¡**: âœ… è¿è¡Œä¸­
- **æ•°æ®åº“**: 675 æ¡æ–°é—»
- **æ‰¹å¤„ç†è„šæœ¬**: âœ… è¿è¡Œä¸­ (åå°è¿›ç¨‹)

### æ‰¹é‡å¤„ç†è„šæœ¬

**è„šæœ¬**: `batch_process.py`

**åŠŸèƒ½**:
- ä»æ•°æ®åº“è¯»å–æ‰€æœ‰æ–°é—»ï¼ˆ675 æ¡ï¼‰
- æ¯æ‰¹å¤„ç† 50 æ¡ï¼ˆé¿å… API é€Ÿç‡é™åˆ¶ï¼‰
- æ‰¹æ¬¡é—´è‡ªåŠ¨ç­‰å¾… 10 ç§’
- é‡åˆ°é€Ÿç‡é™åˆ¶è‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
- å¤„ç†å®Œæˆåè‡ªåŠ¨ç”Ÿæˆå®Œæ•´ MD æŠ¥å‘Š

**è¿è¡Œæ–¹å¼**:
```bash
# åå°è¿è¡Œ
python3 batch_process.py &

# æˆ–å‰å°è¿è¡ŒæŸ¥çœ‹å®æ—¶è¾“å‡º
python3 batch_process.py
```

**è¿›åº¦ç›‘æ§**:
```bash
# è¿è¡Œç›‘æ§è„šæœ¬ï¼ˆæ¯ 10 ç§’æ›´æ–°ä¸€æ¬¡ï¼‰
python3 monitor.py
```

**æŸ¥çœ‹å®æ—¶æ—¥å¿—**:
```bash
# æŸ¥çœ‹å¤„ç†æ—¥å¿—
tail -f /tmp/batch_process_new.log
```

## ğŸ‰ å·²å®Œæˆé…ç½®

### âœ… Docker æœåŠ¡çŠ¶æ€
- **çŠ¶æ€**: âœ… è¿è¡Œä¸­
- **ç«¯å£**: http://localhost:8000
- **æ•°æ®åº“**: `/Users/a1-6/Downloads/æ–°é—»æŠ“å–è„šæœ¬/ai-rss-filter/data/rss_data.db`

### ğŸ“Š å½“å‰æ•°æ®
- **RSS æº**: 24 ä¸ª
- **å·²æŠ“å–æ–°é—»**: 684 æ¡ï¼ˆå»é‡åï¼‰
- **æ•°æ®æ–‡ä»¶**: rss_data.db (4.9MB)

### âš ï¸ å½“å‰é—®é¢˜
1. **LLM API é€Ÿç‡é™åˆ¶**: æ‚¨çš„ API è¾¾åˆ°é€Ÿç‡ä¸Šé™ï¼ˆ429ï¼‰
   - ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼šç­‰å¾…ä¸€æ®µæ—¶é—´åé‡è¯•
   - é•¿æœŸè§£å†³æ–¹æ¡ˆï¼šå‡çº§ API è®¡åˆ’

2. **ai-rss-filter åŸé¡¹ç›® bug**: LLM è¿‡æ»¤é˜¶æ®µå¤±è´¥
   - åŸå› ï¼š`FilterManager.batch_process_entries()` å‡½æ•°å‚æ•°ä¸åŒ¹é…
   - å½±å“ï¼šè™½ç„¶æˆåŠŸæŠ“å–ï¼Œä½†æ— æ³•æ­£ç¡®è¿‡æ»¤

## ğŸš€ å¯ç”¨è„šæœ¬

### 1. ä»æ•°æ®åº“è¯»å–å¹¶è¿‡æ»¤ï¼ˆæ¨èå½“å‰ä½¿ç”¨ï¼‰
```bash
python3 process_from_db.py
```

**è¯´æ˜**:
- ä» Docker å®¹å™¨çš„æ•°æ®åº“è¯»å–æ‰€æœ‰æ–°é—»
- ä½¿ç”¨ LLM API åˆ¤æ–­ç›¸å…³æ€§
- è¾“å‡ºåˆ° `filtered_news_*.json` æ–‡ä»¶

**æ³¨æ„**: API æœ‰é€Ÿç‡é™åˆ¶ï¼Œå»ºè®®æ·»åŠ å»¶è¿Ÿæˆ–åˆ†æ‰¹å¤„ç†

### 2. Docker è‡ªåŠ¨åŒ–ï¼ˆå¾…ä¿®å¤ bugï¼‰
```bash
cd ai-rss-filter
docker-compose up -d
```

è®¿é—®: http://localhost:8000/rss/news_filter

## ğŸ“ é¡¹ç›®æ–‡ä»¶è¯´æ˜

```
/Users/a1-6/Downloads/æ–°é—»æŠ“å–è„šæœ¬/
â”œâ”€â”€ Feeds.opml                    # åŸå§‹ RSS è®¢é˜…åˆ—è¡¨
â”œâ”€â”€ extracted_urls.py             # æå–çš„ RSS URLs
â”œâ”€â”€ ai-rss-filter/               # Docker é¡¹ç›®
â”‚   â”œâ”€â”€ config/config.yaml          # é…ç½®æ–‡ä»¶ï¼ˆå·²é…ç½®ä½ çš„ APIï¼‰
â”‚   â”œâ”€â”€ .env                     # ç¯å¢ƒå˜é‡ï¼ˆå·²é…ç½® API Keyï¼‰
â”‚   â””â”€â”€ data/rss_data.db         # æ•°æ®åº“ï¼ˆ684 æ¡æ–°é—»ï¼‰
â”œâ”€â”€ process_from_db.py            # è¯»å–æ•°æ®åº“ + LLM è¿‡æ»¤ï¼ˆå½“å‰å¯ç”¨ï¼‰
â”œâ”€â”€ rss_filter.py                # åŸå§‹æŠ“å–è„šæœ¬ï¼ˆå¤‡ç”¨ï¼‰
â””â”€â”€ validate_config.py             # é…ç½®éªŒè¯è„šæœ¬
```

## ğŸ”‘ å·²é…ç½®çš„ API ä¿¡æ¯

- **API URL**: https://ai.hybgzs.com/v1
- **æ¨¡å‹**: gemini-3-flash-preview
- **API Key**: <your_openai_api_key>

## ğŸ“‹ è¿‡æ»¤ä¸»é¢˜

å½“å‰é…ç½®çš„ä¸»é¢˜ï¼š
1. Social networkingï¼ˆç¤¾äº¤ç½‘ç»œï¼‰
2. Live streamingï¼ˆç›´æ’­ï¼‰
3. TMT acquisitionsï¼ˆTMTå¹¶è´­ï¼‰
4. Mobile gamingï¼ˆæ‰‹æœºæ¸¸æˆï¼‰

## ğŸ”§ æ•…éšœæ’æŸ¥

### API é€Ÿç‡é™åˆ¶ (Error 429)
**é—®é¢˜**: `æ‚¨çš„é€Ÿç‡è¾¾åˆ°ä¸Šé™ï¼Œè¯·ç¨åå†è¯•`

**è§£å†³æ–¹æ¡ˆ**:
1. ç­‰å¾… 1-2 åˆ†é’Ÿåé‡è¯•
2. ä¿®æ”¹è„šæœ¬å¢åŠ å»¶è¿Ÿæ—¶é—´ï¼š
   ```python
   time.sleep(2)  # å¢åŠ åˆ° 2 ç§’
   ```
3. è”ç³» API æä¾›å•†å‡çº§è®¡åˆ’

### Docker å®¹å™¨é—®é¢˜
```bash
# æŸ¥çœ‹æ—¥å¿—
docker logs ai-rss-filter

# é‡å¯å®¹å™¨
docker restart ai-rss-filter

# åœæ­¢å®¹å™¨
docker stop ai-rss-filter
```

### æŸ¥çœ‹æ•°æ®åº“å†…å®¹
```bash
# è¿›å…¥ Docker å®¹å™¨
docker exec -it ai-rss-filter /bin/bash

# ä½¿ç”¨ Python æŸ¥è¯¢
python3 -c "
import sqlite3
conn = sqlite3.connect('/data/rss_data.db')
cursor = conn.cursor()
cursor.execute('SELECT title, link FROM entries LIMIT 5')
for row in cursor.fetchall():
    print(f'{row[0]}\n{row[1]}\n')
"
```

## ğŸ“Š ä¸‹ä¸€æ­¥å»ºè®®

1. **è§£å†³ API é€Ÿç‡é™åˆ¶**
   - æ·»åŠ é€Ÿç‡é™åˆ¶å¤„ç†
   - å®ç°é‡è¯•æœºåˆ¶

2. **ä¿®å¤ ai-rss-filter bug**
   - ä¿®æ”¹ `FilterManager.batch_process_entries()` è°ƒç”¨
   - ä¿®å¤å‚æ•°ä¼ é€’é—®é¢˜

3. **æ·»åŠ æ›´å¤šåŠŸèƒ½**
   - Web ç•Œé¢æŸ¥çœ‹ç»“æœ
   - å®šæ—¶è‡ªåŠ¨è¿è¡Œï¼ˆcronï¼‰
   - æ¨é€åˆ° Telegram/Email

4. **æµ‹è¯•å…¶ä»– LLM æ¨¡å‹**
   - è¯•ç”¨ gemini-2-flashï¼ˆæ›´å¿«ï¼‰
   - æˆ–å…¶ä»– OpenAI å…¼å®¹æ¨¡å‹

## ğŸ“ è·å–å¸®åŠ©

å¦‚éœ€å¸®åŠ©ï¼š
- æ£€æŸ¥ `/Users/a1-6/Downloads/æ–°é—»æŠ“å–è„šæœ¬/ai-rss-filter/README_ZH.md`
- æˆ–è®¿é—®åŸé¡¹ç›®ï¼šhttps://github.com/zuco1111/ai-rss-filter
